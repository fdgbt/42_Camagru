<%- include('../includes/head.ejs') %>
    </head>

    <%- include('../includes/main.ejs') %>

        <div id="container" class="max-h-screen/mhf sm:max-h-screen/hf overflow-y-scroll" style="scrollbar-width:thin;">
            <div class="flex items-center justify-center flex-row-reverse flex-wrap-reverse gap-4">

                <% if (pictures.length > 0) {

                    for (let picture of pictures) { %>
                    <div class="basis-full md:basis-[32.5%] grow flex justify-center relative group" tabindex="0">
                        <div class="w-fit hover:shadow-2xl active:shadow-2xl focus:shadow-2xl ">

                            <div
                                class="bg-gradient-to-r from-gray-700 dark:from-[#121212] absolute inset-y-0 left-auto group-hover:flex group-active:flex group-focus:flex flex-col justify-around rounded-xl hidden">
                                
                                <% if (user && picture.likes.find( (like) => { return (like.toString() === user.toString()) } )) { %>
                                    <button 
                                        id="btnLike" 
                                        onClick="like(this, '<%= authenticated %>', '<%= picture._id %>')"
                                        class="p-4 rounded-full transition duration-200 bg-green-400 bg-opacity-50 hover:bg-green-400 cursor-pointer">&#10084;&#65039;
                                    </button>
                                <% } else { %>
                                    <button 
                                        id="btnLike" 
                                        onClick="like(this, '<%= authenticated %>', '<%= picture._id %>')"
                                        class="p-4 rounded-full transition duration-200 hover:bg-slate-100 hover:bg-opacity-30 cursor-pointer">&#10084;&#65039;
                                    </button>
                                <% } %>

                                    <button 
                                        id="btnComment"
                                        onClick="comment('<%= authenticated %>', '<%= picture._id %>')"
                                        class="p-4 rounded-full transition duration-200 hover:bg-slate-100 hover:bg-opacity-30 cursor-pointer">&#128172;
                                    </button>
                            </div>
                            <img src="<%= picture.imgUrl %>" alt="<%= picture.title %>" class="rounded-xl" />
                        </div>
                    </div>

                    <% } %>

            </div>

                <% } else { %>
                    <div class="text-center dark:text-slate-100">
                        <h1 class="work-sans p-4">This user does not have any public photo yet ...</h1>
                    </div>
                <% } %>
        </div>

        </div>
        </main>
        <script src="/js/pictureFunction.js"></script>
        
        <%- include('../includes/footer.ejs') %>